<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	<div class="row persons_form">
		<div class="col-sm-offset-2 col-sm-2">
			<p:outputLabel for="input_elab" value="{{elabPhase.numberOfProposalsPeople()|number:2}}"
				styleClass="label_height" />
		</div>
		<div class="col-sm-2">
			<p:inputText id="input_elab"
			    value="{{resourcesBean.project.peopleElaboracion}}"
				ng-model="elabPhase.numberOfAssignedPeople"
				required="true" 
				onkeypress="return isDecimalNumberKey(event)"/>
		</div>
		<div class="col-sm-offset-2 col-sm-4">
			<p:commandButton type="button" style="float:right;" value="Agregar empleado seleccionado" ng-click="addEmployee(elabPhase)" icon="ui-icon-plus"></p:commandButton>
		</div>
    </div>
	<fieldset>
		<table class="table">
			<tr>
				<th class="ui-outputlabel ui-widget"></th>
				<th class="ui-outputlabel ui-widget text-center">Teorico Relativo</th>
				<th class="ui-outputlabel ui-widget text-center">Teorico absoluto</th>
				<th class="ui-outputlabel ui-widget text-center">Diferencia Absoluta</th>
				<th class="ui-outputlabel ui-widget text-center">Diferencia Relativa</th>
				<th class="ui-outputlabel ui-widget text-center">Propuesta</th>
				<th class="ui-outputlabel ui-widget text-center">Diferencia Propuesta</th>
			</tr>				
			<tr>
				<td>Gesti칩n Proyecto</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.projectManagementTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.projectManagementTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.projectManagementAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.projectManagementRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.projectManagementProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.projectManagementProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Requisitos</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.requirementsTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.requirementsTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.requirementsAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.requirementsRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.requirementsProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.requirementsProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Analisis/Dise침o</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.analysisDesignTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.analysisDesignTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.analysisDesignAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.analysisDesignRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.analysisDesignProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.analysisDesignProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Implementaci칩n</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.implementationTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.implementationTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.implementationAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.implementationRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.implementationProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.implementationProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Pruebas</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.testsTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.testsTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.testsAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.testsRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.testsProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.testsProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Despliegues</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.deployTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.deployTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.deployAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.deployRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.deployProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.deployProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Control de Versiones</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.enviromentTheoricalRelative}}</span></td>
				<td class="text-center">{{elabPhase.enviromentTheoricalAbsolute|number:2}}</td>
				<td class="text-center">{{elabPhase.enviromentAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.enviromentRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.enviromentProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.enviromentProposalDiff()|number:2}}</td>
			</tr>
			<tr>
				<td>Totales</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.totalTheoricalRelative()}}</span></td>
				<td class="text-center">{{elabPhase.totalTheoricalAbsolute()|number:2}}</td>
				<td class="text-center">{{elabPhase.totalAbsoluteDifference()|number:2}}</td>
				<td class="text-center"><span class="percentaje">{{elabPhase.totalRelativeDifference()|number:2}}</span></td>
				<td class="text-center">{{elabPhase.totalProposal()|number:2}}</td>
				<td class="text-center">{{elabPhase.totalProposalDiff()|number:2}}</td>
			</tr>
			
		</table>
		</fieldset>
		
		<fieldset>
		<div class="table-responsive">
		<table class="table" ng-if="elabPhase.assignedEmployee.length > 0">
			<tr>
				<th class="ui-outputlabel ui-widget text-center">Nombre</th>
				<th class="ui-outputlabel ui-widget text-center">Gestion Proyecto</th>
				<th class="ui-outputlabel ui-widget text-center">Requisitos</th>
				<th class="ui-outputlabel ui-widget text-center">Analisis y Dise침o</th>
				<th class="ui-outputlabel ui-widget text-center">Implem.</th>
				<th class="ui-outputlabel ui-widget text-center">Pruebas</th>
				<th class="ui-outputlabel ui-widget text-center">Despliegue</th>
				<th class="ui-outputlabel ui-widget text-center">Control de versiones</th>
				<th class="ui-outputlabel ui-widget text-center">Disponibilidad</th>
				<th class="ui-outputlabel ui-widget text-center">Coste</th>
			</tr>
			
			<tr ng-repeat="employeeResource in elabPhase.assignedEmployee">
				
				<td style="position:relative;" class="text-center">
					<span ng-click="deleteEmployee(elabPhase, employeeResource)" class="glyphicon glyphicon-remove delete_icon" aria-hidden="true"/>
					<div class="col-xs-12">
						{{employeeResource.employee.name}}
					</div>	
				</td>
				<td class="text-center">
					<div class="col-xs-12">
					<p:outputLabel for="elabObj1" value=""/>
					<p:inputText ng-blur="validateProjectManagementHours(employeeResource)" style="width:40px;" required="false" id="elabObj1" 
						value="{{employeeResource.projectManagementHours}}"
						onkeypress="return isDecimalNumberKey(event)"
						 />
					</div>	 
				</td>
				<td class="text-center">
					<div class="col-xs-12">
					<p:outputLabel for="elabObj2" value=""/>
					<p:inputText ng-blur="validateRequirementsHours(employeeResource)" style="width:40px;" required="false" id="elabObj2" 
						value="{{employeeResource.requirementsHours}}"
						onkeypress="return isDecimalNumberKey(event)"
						 />
					</div>	 
				</td>
				<td class="text-center">
					<div class="col-xs-12">
						<p:outputLabel for="elabObj3" value=""/>
						<p:inputText ng-blur="validateAnalysisDesignHours(employeeResource)" style="width:40px;" required="false" id="elabObj3" 
							value="{{employeeResource.analysisDesignHours}}"
							onkeypress="return isDecimalNumberKey(event)"
							 />
					</div>	 
				</td>
				<td class="text-center">
					<div class="col-xs-12">
						<p:outputLabel for="elabObj4" value=""/>
						<p:inputText ng-blur="validateImplementationHours(employeeResource)" style="width:40px;" required="false" id="elabObj4" 
							value="{{employeeResource.implementationHours}}"
							onkeypress="return isDecimalNumberKey(event)"
							 />
					</div>	 
				</td>
			
				<td class="text-center">
					<div class="col-xs-12">
						<p:outputLabel for="elabObj5" value=""/>
						<p:inputText ng-blur="validateTestHours(employeeResource)" style="width:40px;" required="false" id="elabObj5" 
							value="{{employeeResource.testsHours}}"
							onkeypress="return isDecimalNumberKey(event)"
							 />
					</div>
				</td>
				<td class="text-center">
					<div class="col-xs-12">
						<p:outputLabel for="elabObj6" value=""/>
						<p:inputText ng-blur="validateDeployHours(employeeResource)" style="width:40px;" required="false" id="elabObj6" 
							value="{{employeeResource.deployHours}}"
							onkeypress="return isDecimalNumberKey(event)"
							 />
					</div>	 
				</td>
			
				<td class="text-center">
					<div class="col-xs-12">
						<p:outputLabel for="elabObj7" value=""/>
						<p:inputText ng-blur="validateEnvionmentHours(employeeResource)" style="width:40px;" required="false" id="elabObj7" 
							value="{{employeeResource.environmentHours}}"
							onkeypress="return isDecimalNumberKey(event)"
							 />
					</div>	 
				</td>	
				<td class="text-center">{{assignHours(employeeResource)}}/{{employeeResource.availableEmployeeHours}}</td>
				<td class="text-center">{{employeeCost(employeeResource)|number:2}}</td>
			</tr>
			
			
			<tr>
				<td class="text-center">Totales</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "projectManagementHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "requirementsHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "analysisDesignHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "implementationHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "testsHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "deployHours")}}</td>
				<td class="text-center">{{disciplineHoursTotal(elabPhase.assignedEmployee, "environmentHours")}}</td>
				<td class="text-center"></td>
				<td class="text-center"></td>
			</tr>
		</table>
		</div>
		</fieldset>	
</ui:composition>	
